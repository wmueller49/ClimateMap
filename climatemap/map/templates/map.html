{% load static %}
{% load bootstrap5 %}

<link rel="stylesheet" href="{% static 'style.css' %}">

<html>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Climate Map</title>
</head>
<nav class="navbar navbar-dark" style="background-color: #097969;">
    <a class="navbar-brand" href="/map"><span class="navbar-brand mb-0 h1">Climate Map</span></a>
    <a class="navbar-brand" href="/map/calculator"><span class="navbar-brand mb-0 h1">Carbon Footprint Calculator</span></a>
</nav>

<body>
    <!--<h1>Hello</h1> -->
    <center>
        <iframe src="climate_map" width="70%" height="500px" style="display: block;" alight=center></iframe>
        <div class="slidecontainer">
            <input type="range" min="1960" max="2023" value="2000" class="slider" id="myRange">
            <p>Year: <span id="year_output"></span></p>
        </div>
    </center>
<script>
var slider = document.getElementById("myRange");
var output = document.getElementById("year_output");
output.innerHTML = slider.value;

slider.oninput = function() {
  output.innerHTML = this.value;
}
var postData = {
            year: this.value
        }
slider.onchange = function() {
  /*console.log(this.value)
        $.post("/map/update_map", postData, function(data){
        });
        */
  var xhr = new XMLHttpRequest();
  xhr.open("POST", "/map/update_map");
  xhr.setRequestHeader("Content-Type", "application/json");
  xhr.send(JSON.stringify({
          year: this.value
  }));

}
</script>
</body>
</html>
